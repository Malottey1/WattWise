{% extends "base.html" %}
{% block content %}
<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title">Active Alerts</h5>
    <div id="alert-container"></div>
  </div>
</div>

<script>
async function loadAlerts(){
  try {
    const resp = await fetch("/api/alerts");
    if (!resp.ok) return;
    const data = await resp.json();
    const container = document.getElementById("alert-container");
    container.innerHTML = "";

    (data.alerts || []).forEach(alert => {
      const div = document.createElement("div");
      div.className = "alert " + 
        (alert.type === "critical" ? "alert-danger" : "alert-warning") + " mt-2";
      div.innerHTML = `<strong>${alert.message}</strong><br><small>${alert.suggestion}</small>`;
      container.appendChild(div);
    });

    if (!data.alerts || data.alerts.length === 0){
      container.innerHTML = "<p class='text-muted'>âœ… No active alerts</p>";
    }
  } catch (err) { console.error("Alerts error", err); }
}
// refresh every 10s
setInterval(loadAlerts, 10000);
loadAlerts();
</script>

{% endblock %}
